<!DOCTYPE html>
<html lang="en-AU">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>PaintWorkz 4.6 Revert</title>
    <style>
        :root {
            --gold: #d4af37;
            --bg: #f4f4f9;
            --panel: #34c759;
            --door: #ff9500;
            --drawer: #2196f3;
        }
        body { margin: 0; font-family: sans-serif; background: var(--bg); padding-bottom: 100px; }
        header { background: #000; color: var(--gold); padding: 15px; text-align: center; font-weight: bold; font-size: 20px; border-bottom: 3px solid var(--gold); }
        
        .nav { display: flex; background: #222; position: sticky; top: 0; z-index: 100; }
        .nav-btn { flex: 1; padding: 15px; color: #fff; text-align: center; font-size: 12px; font-weight: bold; border: none; background: none; }
        .nav-btn.active { border-bottom: 3px solid var(--gold); color: var(--gold); }

        .container { padding: 15px; }
        .view { display: none; }
        .view.active { display: block; }

        .card { background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 15px; }
        label { display: block; font-size: 11px; font-weight: bold; margin-bottom: 5px; color: #666; }
        input, select { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; font-size: 16px; }

        /* Measure Grid */
        .btn-grid { display: flex; gap: 5px; margin-bottom: 10px; }
        .btn-opt { flex: 1; padding: 10px; border: 1px solid #ccc; background: #fff; border-radius: 5px; text-align: center; font-size: 12px; font-weight: bold; cursor: pointer; }
        .btn-opt.active { background: #333; color: #fff; border-color: #000; }

        .edge-row { display: flex; gap: 5px; margin-bottom: 10px; }
        .edge-btn { flex: 1; padding: 15px; border: 2px solid #ddd; border-radius: 5px; text-align: center; font-weight: bold; color: #ccc; }
        .edge-btn.active { background: var(--panel); border-color: #28a745; color: #fff; }

        .add-btn { width: 100%; padding: 18px; background: var(--gold); border: none; border-radius: 5px; font-weight: bold; font-size: 18px; cursor: pointer; }

        .part-item { background: #fff; padding: 10px; border-radius: 5px; margin-bottom: 8px; border-left: 5px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .part-info { flex: 1; }
        .part-qty { background: #000; color: var(--gold); padding: 5px 10px; border-radius: 4px; font-weight: bold; margin-right: 10px; }

        .footer { position: fixed; bottom: 0; width: 100%; background: #000; color: #fff; display: flex; justify-content: space-around; padding: 15px 0; border-top: 2px solid var(--gold); }
        .stat { text-align: center; }
        .stat-val { font-size: 18px; font-weight: bold; color: var(--gold); }
    </style>
</head>
<body>

<header>PAINTWORKZ PRO 4.6</header>

<div class="nav">
    <button class="nav-btn active" onclick="showV('measure')">MEASURE</button>
    <button class="nav-btn" onclick="showV('parts')">PARTS LIST</button>
    <button class="nav-btn" onclick="showV('db')">DATABASE</button>
</div>

<div class="container">
    <div id="measure" class="view active">
        <div class="card">
            <label>CLIENT</label>
            <select id="client-select"></select>
            
            <label>JOB NAME</label>
            <input type="text" id="job-name" placeholder="Reference">

            <label>PART TYPE</label>
            <div class="btn-grid">
                <div class="btn-opt active" id="type-panel" onclick="setType('Panel')">PANEL</div>
                <div class="btn-opt" id="type-door" onclick="setType('Door')">DOOR</div>
                <div id="type-drawer" class="btn-opt" onclick="setType('Drawer')">DRAWER</div>
            </div>

            <label>DESCRIPTION</label>
            <input type="text" id="part-desc" placeholder="e.g. Fridge End">

            <div style="display:flex; gap:10px;">
                <div style="flex:1"><label>HEIGHT</label><input type="number" id="h" oninput="calc()"></div>
                <div style="flex:1"><label>WIDTH</label><input type="number" id="w" oninput="calc()"></div>
            </div>

            <label>EDGES (L / L / S / S)</label>
            <div class="edge-row">
                <div class="edge-btn" id="e1" onclick="tE('e1')">L</div>
                <div class="edge-btn" id="e2" onclick="tE('e2')">L</div>
                <div class="edge-btn" id="e3" onclick="tE('e3')">S</div>
                <div class="edge-btn" id="e4" onclick="tE('e4')">S</div>
            </div>

            <div style="text-align:center; padding: 10px;">
                <label>CURRENT SQM</label>
                <div id="cur-sqm" style="font-size:32px; font-weight:bold; color:var(--gold);">0.000</div>
            </div>

            <button class="add-btn" onclick="addPart()">ADD TO LIST</button>
        </div>
    </div>

    <div id="parts" class="view">
        <div id="parts-list"></div>
    </div>

    <div id="db" class="view">
        <div class="card">
            <h3>Settings Reverted to 4.6</h3>
            <p>Clients and Profiles are pre-loaded from your records.</p>
        </div>
    </div>
</div>

<div class="footer">
    <div class="stat"><div>TOTAL SQM</div><div class="stat-val" id="total-sqm">0.000</div></div>
    <div class="stat"><div>ITEMS</div><div class="stat-val" id="total-items">0</div></div>
</div>

<script>
    let items = [];
    let curType = 'Panel';
    const clients = ["12345ABM", "Absolute Kitchens", "Advanced Cabinetry", "AKC Kitchens", "Braw Creative", "Brian Moloney", "Cabinets & Stone", "Cabinets by Michael", "Chooka", "CKK", "Clover Doors", "Complete Style Joinery", "Concept 2 Reality", "Coronet Kitchens", "Create a Kitchen", "Creative Cabinetry", "Cutting Edge Joinery", "Driscolls Joinery", "Evolution Kitchens and Joinery", "Geoff Frost Builders", "GM Cabinets", "Grampians Joinery", "Grovedale Kitchens", "Gunning Concepts", "Hamilton Sheetmetal", "Harris Cabinets", "Howe Kitchens & Joinery", "Hy-Craft", "Jardines Cabinets", "Joinery by Jarrod", "Jonassons", "Kingston Kabinets", "Kitchens U Build", "Kyle Hendy", "Leighton Park", "Matthews Joinery", "Ocean Grove Joinery", "Onshore", "R J Walter", "Richardson Joinery", "Schier Cabinet Makers", "Snaauws Kitchens", "SRT Cabinetry", "Stawell Joinery", "Stephensons Kitchens", "T&J Kitchens", "Tony Lambert Kitchens", "Total Kitchen Solutions", "Trendset Kitchens", "Troy Turner", "Ultrabuild", "VG Cabinets", "VJS Geelong", "VJS Shepparton", "Walk in Client", "Westend Cabinetry"];

    window.onload = () => {
        const sel = document.getElementById('client-select');
        clients.sort().forEach(c => {
            let opt = document.createElement('option');
            opt.value = c; opt.innerText = c;
            sel.appendChild(opt);
        });
    };

    function showV(id) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function setType(t) {
        curType = t;
        document.querySelectorAll('.btn-opt').forEach(b => b.classList.remove('active'));
        document.getElementById('type-' + t.toLowerCase()).classList.add('active');
    }

    function tE(id) { document.getElementById(id).classList.toggle('active'); calc(); }

    function calc() {
        let h = parseFloat(document.getElementById('h').value) || 0;
        let w = parseFloat(document.getElementById('w').value) || 0;
        let sqm = (h * w) / 1000000;
        document.getElementById('cur-sqm').innerText = sqm.toFixed(3);
        return sqm;
    }

    function addPart() {
        let h = document.getElementById('h').value;
        let w = document.getElementById('w').value;
        if(!h || !w) return alert("Enter dimensions");

        items.push({
            h, w, 
            type: curType, 
            desc: document.getElementById('part-desc').value || 'Part',
            sqm: calc()
        });

        updateUI();
        document.getElementById('h').value = '';
        document.getElementById('w').value = '';
    }

    function updateUI() {
        let list = document.getElementById('parts-list');
        list.innerHTML = '';
        let totalS = 0;
        items.forEach((it, i) => {
            totalS += it.sqm;
            list.innerHTML += `
                <div class="part-item">
                    <div class="part-qty">1</div>
                    <div class="part-info">
                        <strong>${it.h} x ${it.w}</strong> - ${it.desc}<br>
                        <small>${it.type}</small>
                    </div>
                    <div style="color:red; font-weight:bold;" onclick="items.splice(${i},1);updateUI()">X</div>
                </div>
            `;
        });
        document.getElementById('total-sqm').innerText = totalS.toFixed(3);
        document.getElementById('total-items').innerText = items.length;
    }
</script>
</body>
</html>
